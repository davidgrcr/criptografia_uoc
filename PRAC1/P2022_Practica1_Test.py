#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import unittest

#from P2022_Practica1_Solution_Skeleton import *
from P2022_Practica1_Skeleton import *



class Test_1_12(unittest.TestCase):

    def test_1(self):
        plaintext = "ABCD"
        expected_ciphertext = "DEFG"
        ciphertext = uoc_simple_subs_cipher(plaintext, 3)
        self.assertEqual(ciphertext, expected_ciphertext)

    def test_2(self):
        ciphertext = "DEFG"
        expected_plaintext = "ABCD"
        plaintext = uoc_simple_subs_decipher(ciphertext, 3)
        self.assertEqual(plaintext, expected_plaintext)

    def test_3(self):
        plaintext = "HELLOWORLD"
        expected_ciphertext = "AXEEHPHKEW"
        ciphertext = uoc_simple_subs_cipher(plaintext, 19)
        self.assertEqual(ciphertext, expected_ciphertext)

    def test_4(self):
        ciphertext = "AXEEHPHKEW"
        expected_plaintext = "HELLOWORLD"
        plaintext = uoc_simple_subs_decipher(ciphertext, 19)
        self.assertEqual(plaintext, expected_plaintext)

    def test_5(self):
        plaintext = "ESTOESUNMENSAJEUNPOQUITOMASLARGOQUEELANTERIOR"
        expected_ciphertext = "JXYTJXZSRJSXFOJZSUTVZNYTRFXQFWLTVZJJQFSYJWNTW"
        ciphertext = uoc_simple_subs_cipher(plaintext, 5)
        self.assertEqual(ciphertext, expected_ciphertext)

    def test_6(self):
        ciphertext = "JXYTJXZSRJSXFOJZSUTVZNYTRFXQFWLTVZJJQFSYJWNTW"
        expected_plaintext = "ESTOESUNMENSAJEUNPOQUITOMASLARGOQUEELANTERIOR"
        plaintext = uoc_simple_subs_decipher(ciphertext, 5)
        self.assertEqual(plaintext, expected_plaintext)



class Test_1_34(unittest.TestCase):

    def test_1(self):
        subs_alphabet = "TZJCMFHQNDVROLYPUGXSWKBEIA"
        plaintext = "ABCD"
        expected_ciphertext = "TZJC"
        ciphertext = uoc_mono_subs_cipher(plaintext, subs_alphabet)
        self.assertEqual(ciphertext, expected_ciphertext)

    def test_2(self):
        subs_alphabet = "TZJCMFHQNDVROLYPUGXSWKBEIA"
        ciphertext = "TZJC"
        expected_plaintext = "ABCD"
        plaintext = uoc_mono_subs_decipher(ciphertext, subs_alphabet)
        self.assertEqual(plaintext, expected_plaintext)

    def test_3(self):
        subs_alphabet = "KAUIHEWLPCMOZXFBGRNJYSQDTV"
        plaintext = "HELLOWORLD"
        expected_ciphertext = "LHOOFQFROI"
        ciphertext = uoc_mono_subs_cipher(plaintext, subs_alphabet)
        self.assertEqual(ciphertext, expected_ciphertext)

    def test_4(self):
        subs_alphabet = "KAUIHEWLPCMOZXFBGRNJYSQDTV"
        ciphertext = "LHOOFQFROI"
        expected_plaintext = "HELLOWORLD"
        plaintext = uoc_mono_subs_decipher(ciphertext, subs_alphabet)
        self.assertEqual(plaintext, expected_plaintext)

    def test_5(self):
        subs_alphabet = "URXKNAVJLHIWSZQMEOGCTBDYFP"
        plaintext = "ESTOESUNMENSAJEUNPOQUITOMASLARGOQUEELANTERIOR"
        expected_ciphertext = "NGCQNGTZSNZGUHNTZMQETLCQSUGWUOVQETNNWUZCNOLQO"
        ciphertext = uoc_mono_subs_cipher(plaintext, subs_alphabet)
        self.assertEqual(ciphertext, expected_ciphertext)

    def test_6(self):
        subs_alphabet = "URXKNAVJLHIWSZQMEOGCTBDYFP"
        ciphertext = "NGCQNGTZSNZGUHNTZMQETLCQSUGWUOVQETNNWUZCNOLQO"
        expected_plaintext = "ESTOESUNMENSAJEUNPOQUITOMASLARGOQUEELANTERIOR"
        plaintext = uoc_mono_subs_decipher(ciphertext, subs_alphabet)
        self.assertEqual(plaintext, expected_plaintext)

class Test_2_1(unittest.TestCase):

    def test_1(self):
        plaintext="ATENCIONELDINEROESTAOCULTOENLAPRIMERATAQUILLADELADERECHAENLAESTACIONCENTRALESNECESARIOENCARGARSEDELARECOGIDAENLUNESPUESESELUNICODIAQUENOSERAVIGILADA"
        ciphertext = uoc_simple_subs_cipher(plaintext, 3)
        shift = uoc_find_shift(ciphertext)
        self.assertEqual(shift, 3)


    def test_2(self):
        plaintext="ATENCIONELDINEROESTAOCULTOENLAPRIMERATAQUILLADELADERECHAENLAESTACIONCENTRALESNECESARIOENCARGARSEDELARECOGIDAENLUNESPUESESELUNICODIAQUENOSERAVIGILADA"
        ciphertext = uoc_simple_subs_cipher(plaintext, 5)
        shift = uoc_find_shift(ciphertext)
        self.assertEqual(shift, 5)

    def test_3(self):
        plaintext="NOSVEMOSDELANTEDELAIGLESIAESELMEJORSITIOPARAPASARDESAPERCIBIDOENBREVETEDOYLASENAL"
        ciphertext = uoc_simple_subs_cipher(plaintext, 7)
        shift = uoc_find_shift(ciphertext)
        self.assertEqual(shift, 7)

    def test_4(self):
        plaintext="NOSVEMOSDELANTEDELAIGLESIAESELMEJORSITIOPARAPASARDESAPERCIBIDOENBREVETEDOYLASENAL"
        ciphertext = uoc_simple_subs_cipher(plaintext, 19)
        shift = uoc_find_shift(ciphertext)
        self.assertEqual(shift, 19)


class Test_2_2(unittest.TestCase):

    def test_1(self):
        plaintext="ENUNLUGARDELAMANCHADECUYONOMBRENOQUIEROACORDARMENOHAMUCHOTIEMPOQUEVIVAUNHIDALGODELOSDELANZAENASTILLEROADARGAANTIGUAROCNFLACOYGALGOCORREDORUNAOLLADEALGOMASVACAQUECARNEROSALPICONLASMASNOCHESDUELOSYQUEBRANTOSLOSSABADOSLANTEJASLOSVIERNESALGUNPALOMINODEANADIDURALOSDOMINGOSCONSUMANLASTRESPARTESDESUHACIENDAELRESTODELLACONCLUANSAYODEVELARTECALZASDEVELLUDOPARALASFIESTASCONSUSPANTUFLOSDELOMESMOYLOSDASDEENTRESEMANASEHONRABACONSUVELLORDELOMASFINOTENAENSUCASAUNAAMAQUEPASABADELOSCUARENTAYUNASOBRINAQUENOLLEGABAALOSVEINTEYUNMOZODECAMPOYPLAZAQUEASENSILLABAELROCNCOMOTOMABALAPODADERAFRISABALAEDADDENUESTROHIDALGOCONLOSCINCUENTAANOSERADECOMPLEXIONRECIASECODECARNESENJUTODEROSTROGRANMADRUGADORYAMIGODELACAZAQUIERENDECIRQUETENAELSOBRENOMBREDEQUIJADAOQUESADAQUEENESTOHAYALGUNADIFERENCIAENLOSAUTORESQUEDESTECASOESCRIBENAUNQUEPORCONJETURASVEROSMILESSEDEJAENTENDERQUESELLAMABAQUIJANAPEROESTOIMPORTAPOCOANUESTROCUENTOBASTAQUEENLANARRACIONDELNOSESALGAUNPUNTODELAVERDADESPUESDESABERQUEESTESOBREDICHOHIDALGOLOSRATOSQUEESTABAOCIOSOQUEERANLOSMASDELANOSEDABAALEERLIBROSDECABALLERASCONTANTAAFICIONYGUSTOQUEOLVIDOCASIDETODOPUNTOELEJERCICIODELACAZAYAUNLAADMINISTRACIONDESUHACIENDAYLLEGOATANTOSUCURIOSIDADYDESATINOENESTOQUEVENDIOMUCHASHANEGASDETIERRADESEMBRADURAPARACOMPRARLIBROSDECABALLERASENQUELEERYASLLEVOASUCASATODOSCUANTOSPUDOHABERDELLOSYDETODOSNINGUNOSLEPARECANTANBIENCOMOLOSQUECOMPUSOELFAMOSOFELICIANODESILVAPORQUELACLARIDADDESUPROSAYAQUELLASENTRICADASRAZONESSUYASLEPARECANDEPERLASYMASCUANDOLLEGABAALEERAQUELLOSREQUIEBROSYCARTASDEDESAFOSDONDEENMUCHASPARTESHALLABAESCRITOLARAZONDELASINRAZONQUEAMIRAZONSEHACEDETALMANERAMIRAZONENFLAQUECEQUECONRAZONMEQUEJODELAVUESTRAFERMOSURAYTAMBIENCUANDOLEALOSALTOSCIELOSQUEDEVUESTRADIVINIDADDIVINAMENTECONLASESTRELLASOSFORTIFICANYOSHACENMERECEDORADELMERECIMIENTOQUEMERECELAVUESTRAGRANDEZACONESTASRAZONESPERDAELPOBRECABALLEROELJUICIOYDESVELABASEPORENTENDERLASYDESENTRANARLESELSENTIDOQUENOSELOSACARANILASENTENDIERAELMESMOARISTOTELESSIRESUCITARAPARASOLOELLONOESTABAMUYBIENCONLASHERIDASQUEDONBELIANSDABAYRECEBAPORQUESEIMAGINABAQUEPORGRANDESMAESTROSQUELEHUBIESENCURADONODEJARADETENERELROSTROYTODOELCUERPOLLENODECICATRICESYSENALESPEROCONTODOALABABAENSUAUTORAQUELACABARSULIBROCONLAPROMESADEAQUELLAINACABABLEAVENTURAYMUCHASVECESLEVINODESEODETOMARLAPLUMAYDALLEFINALPIEDELALETRACOMOALLSEPROMETEYSINDUDAALGUNALOHICIERAYAUNSALIERACONELLOSIOTROSMAYORESYCONTINUOSPENSAMIENTOSNOSELOESTORBARANTUVOMUCHASVECESCOMPETENCIACONELCURADESULUGARQUEERAHOMBREDOCTOGRADUADOENSIGENZASOBRECUALHABASIDOMEJORCABALLEROPALMERNDEINGALATERRAOAMADSDEGAULAMASMAESENICOLASBARBERODELMISMOPUEBLODECAQUENINGUNOLLEGABAALCABALLERODELFEBOYQUESIALGUNOSELEPODACOMPARARERADONGALAORHERMANODEAMADSDEGAULAPORQUETENAMUYACOMODADACONDICIONPARATODOQUENOERACABALLEROMELINDROSONITANLLORONCOMOSUHERMANOYQUEENLODELAVALENTANOLEIBAENZAGAENRESOLUCIONELSEENFRASCOTANTOENSULECTURAQUESELEPASABANLASNOCHESLEYENDODECLAROENCLAROYLOSDASDETURBIOENTURBIOYASDELPOCODORMIRYDELMUCHOLEERSELESECOELCELEBRODEMANERAQUEVINOAPERDERELJUICIOLLENOSELELAFANTASADETODOAQUELLOQUELEAENLOSLIBROSASDEENCANTAMENTOSCOMODEPENDENCIASBATALLASDESAFOSHERIDASREQUIEBROSAMORESTORMENTASYDISPARATESIMPOSIBLESYASENTOSELEDETALMODOENLAIMAGINACIONQUEERAVERDADTODAAQUELLAMAQUINADEAQUELLASSONADASINVENCIONESQUELEAQUEPARAELNOHABAOTRAHISTORIAMASCIERTAENELMUNDODECAELQUEELCIDRUYDAZHABASIDOMUYBUENCABALLEROPEROQUENOTENAQUEVERCONELCABALLERODELAARDIENTEESPADAQUEDESOLOUNREVESHABAPARTIDOPORMEDIODOSFIEROSYDESCOMUNALESGIGANTESMEJORESTABACONBERNARDODELCARPIOPORQUEENRONCESVALLESHABAMUERTOAROLDANELENCANTADOVALIENDOSEDELAINDUSTRIADEHERCULESCUANDOAHOGOAANTEOELHIJODELATIERRAENTRELOSBRAZOSDECAMUCHOBIENDELGIGANTEMORGANTEPORQUECONSERDEAQUELLAGENERACIONGIGANTEAQUETODOSSONSOBERBIOSYDESCOMEDIDOSELSOLOERAAFABLEYBIENCRIADOPEROSOBRETODOSESTABABIENCONREINALDOSDEMONTALBANYMASCUANDOLEVEASALIRDESUCASTILLOYROBARCUANTOSTOPABAYCUANDOENALLENDEROBOAQUELDOLODEMAHOMAQUEERATODODEOROSEGUNDICESUHISTORIADIERAELPORDARUNAMANODECOCESALTRAIDORDEGALALONALAMAQUETENAYAUNASUSOBRINADEANADIDURAENEFETOREMATADOYASUJUICIOVINOADARENELMASEXTRANOPENSAMIENTOQUEJAMASDIOLOCOENELMUNDOYFUEQUELEPARECIOCONVENIBLEYNECESARIOASPARAELAUMENTODESUHONRACOMOPARAELSERVICIODESUREPUBLICAHACERSECABALLEROANDANTEYIRSEPORTODOELMUNDOCONSUSARMASYCABALLOABUSCARLASAVENTURASYAEJERCITARSEENTODOAQUELLOQUEELHABALEDOQUELOSCABALLEROSANDANTESSEEJERCITABANDESHACIENDOTODOGENERODEAGRAVIOYPONIENDOSEENOCASIONESYPELIGROSDONDEACABANDOLOSCOBRASEETERNONOMBREYFAMAIMAGINABASEELPOBREYACORONADOPORELVALORDESUBRAZOPORLOMENOSDELIMPERIODETRAPISONDAYASCONESTOSTANAGRADABLESPENSAMIENTOSLLEVADODELEXTRANOGUSTOQUEENELLOSSENTASEDIOPRIESAAPONERENEFETOLOQUEDESEABAYLOPRIMEROQUEHIZOFUELIMPIARUNASARMASQUEHABANSIDODESUSBISABUELOSQUETOMADASDEORNYLLENASDEMOHOLUENGOSSIGLOSHABAQUEESTABANPUESTASYOLVIDADASENUNRINCONLIMPIOLASYADEREZOLASLOMEJORQUEPUDOPEROVIOQUETENANUNAGRANFALTAYERAQUENOTENANCELADADEENCAJESINOMORRIONSIMPLEMASAESTOSUPLIOSUINDUSTRIAPORQUEDECARTONESHIZOUNMODODEMEDIACELADAQUEENCAJADACONELMORRIONHACANUNAAPARIENCIADECELADAENTERAESVERDADQUEPARAPROBARSIERAFUERTEYPODAESTARALRIESGODEUNACUCHILLADASACOSUESPADAYLEDIODOSGOLPESYCONELPRIMEROYENUNPUNTODESHIZOLOQUEHABAHECHOENUNASEMANAYNODEJODEPARECERLEMALLAFACILIDADCONQUELAHABAHECHOPEDAZOSYPORASEGURARSEDESTEPELIGROLATORNOAHACERDENUEVOPONIENDOLEUNASBARRASDEHIERROPORDEDENTRODETALMANERAQUEELQUEDOSATISFECHODESUFORTALEZAYSINQUERERHACERNUEVAEXPERIENCIADELLALADIPUTOYTUVOPORCELADAFINSIMADEENCAJE"

        expected_subs_alphabet = "URXKNAVJLHIWSZQMEOGCTBDYFP"
        ciphertext = uoc_mono_subs_cipher(plaintext, expected_subs_alphabet)
        subs_alphabet = uoc_find_alphabet(ciphertext)
        new_plaintext = uoc_mono_subs_decipher(ciphertext, subs_alphabet)
        ok = 0
        for i in range(len(plaintext)):
            if plaintext[i] == new_plaintext[i]:
                ok += 1
        score = round(100*float(ok)/len(plaintext),2)
        print("\nplaintext:", new_plaintext[:64], "...")
        print("Ex 2.2 score:", score)
        self.assertGreater(score, 70)


    def test_2(self):
        
        plaintext="CONESTASRAZONESPERDAELPOBRECABALLEROELJUICIOYDESVELABASEPORENTENDERLASYDESENTRANARLESELSENTIDOQUENOSELOSACARANILASENTENDIERAELMESMOARISTOTELESSIRESUCITARAPARASOLOELLONOESTABAMUYBIENCONLASHERIDASQUEDONBELIANSDABAYRECEBAPORQUESEIMAGINABAQUEPORGRANDESMAESTROSQUELEHUBIESENCURADONODEJARADETENERELROSTROYTODOELCUERPOLLENODECICATRICESYSENALESPEROCONTODOALABABAENSUAUTORAQUELACABARSULIBROCONLAPROMESADEAQUELLAINACABABLEAVENTURAYMUCHASVECESLEVINODESEODETOMARLAPLUMAYDALLEFINALPIEDELALETRACOMOALLSEPROMETEYSINDUDAALGUNALOHICIERAYAUNSALIERACONELLOSIOTROSMAYORESYCONTINUOSPENSAMIENTOSNOSELOESTORBARANTUVOMUCHASVECESCOMPETENCIACONELCURADESULUGARQUEERAHOMBREDOCTOGRADUADOENSIGENZASOBRECUALHABASIDOMEJORCABALLEROPALMERNDEINGALATERRAOAMADSDEGAULAMASMAESENICOLASBARBERODELMISMOPUEBLODECAQUENINGUNOLLEGABAALCABALLERODELFEBOYQUESIALGUNOSELEPODACOMPARARERADONGALAORHERMANODEAMADSDEGAULAPORQUETENAMUYACOMODADACONDICIONPARATODOQUENOERACABALLEROMELINDROSONITANLLORONCOMOSUHERMANOYQUEENLODELAVALENTANOLEIBAENZAGAENRESOLUCIONELSEENFRASCOTANTOENSULECTURAQUESELEPASABANLASNOCHESLEYENDODECLAROENCLAROYLOSDASDETURBIOENTURBIOYASDELPOCODORMIRYDELMUCHOLEERSELESECOELCELEBRODEMANERAQUEVINOAPERDERELJUICIOLLENOSELELAFANTASADETODOAQUELLOQUELEAENLOSLIBROSASDEENCANTAMENTOSCOMODEPENDENCIASBATALLASDESAFOSHERIDASREQUIEBROSAMORESTORMENTASYDISPARATESIMPOSIBLESYASENTOSELEDETALMODOENLAIMAGINACIONQUEERAVERDADTODAAQUELLAMAQUINADEAQUELLASSONADASINVENCIONESQUELEAQUEPARAELNOHABAOTRAHISTORIAMASCIERTAENELMUNDODECAELQUEELCIDRUYDAZHABASIDOMUYBUENCABALLEROPEROQUENOTENAQUEVERCONELCABALLERODELAARDIENTEESPADAQUEDESOLOUNREVESHABAPARTIDOPORMEDIODOSFIEROSYDESCOMUNALESGIGANTESMEJORESTABACONBERNARDODELCARPIOPORQUEENRONCESVALLESHABAMUERTOAROLDANELENCANTADOVALIENDOSEDELAINDUSTRIADEHERCULESCUANDOAHOGOAANTEOELHIJODELATIERRAENTRELOSBRAZOSDECAMUCHOBIENDELGIGANTEMORGANTEPORQUECONSERDEAQUELLAGENERACIONGIGANTEAQUETODOSSONSOBERBIOSYDESCOMEDIDOSELSOLOERAAFABLEYBIENCRIADOPEROSOBRETODOSESTABABIENCONREINALDOSDEMONTALBANYMASCUANDOLEVEASALIRDESUCASTILLOYROBARCUANTOSTOPABAYCUANDOENALLENDEROBOAQUELDOLODEMAHOMAQUEERATODODEOROSEGUNDICESUHISTORIADIERAELPORDARUNAMANODECOCESALTRAIDORDEGALALONALAMAQUETENAYAUNASUSOBRINADEANADIDURAENEFETOREMATADOYASUJUICIOVINOADARENELMASEXTRANOPENSAMIENTOQUEJAMASDIOLOCOENELMUNDOYFUEQUELEPARECIOCONVENIBLEYNECESARIOASPARAELAUMENTODESUHONRACOMOPARAELSERVICIODESUREPUBLICAHACERSECABALLEROANDANTEYIRSEPORTODOELMUNDOCONSUSARMASYCABALLOABUSCARLASAVENTURASYAEJERCITARSEENTODOAQUELLOQUEELHABALEDOQUELOSCABALLEROSANDANTESSEEJERCITABANDESHACIENDOTODOGENERODEAGRAVIOYPONIENDOSEENOCASIONESYPELIGROSDONDEACABANDOLOSCOBRASEETERNONOMBREYFAMAIMAGINABASEELPOBREYACORONADOPORELVALORDESUBRAZOPORLOMENOSDELIMPERIODETRAPISONDAYASCONESTOSTANAGRADABLESPENSAMIENTOSLLEVADODELEXTRANOGUSTOQUEENELLOSSENTASEDIOPRIESAAPONERENEFETOLOQUEDESEABAYLOPRIMEROQUEHIZOFUELIMPIARUNASARMASQUEHABANSIDODESUSBISABUELOSQUETOMADASDEORNYLLENASDEMOHOLUENGOSSIGLOSHABAQUEESTABANPUESTASYOLVIDADASENUNRINCONLIMPIOLASYADEREZOLASLOMEJORQUEPUDOPEROVIOQUETENANUNAGRANFALTAYERAQUENOTENANCELADADEENCAJESINOMORRIONSIMPLEMASAESTOSUPLIOSUINDUSTRIAPORQUEDECARTONESHIZOUNMODODEMEDIACELADAQUEENCAJADACONELMORRIONHACANUNAAPARIENCIADECELADAENTERAESVERDADQUEPARAPROBARSIERAFUERTEYPODAESTARALRIESGODEUNACUCHILLADASACOSUESPADAYLEDIODOSGOLPESYCONELPRIMEROYENUNPUNTODESHIZOLOQUEHABAHECHOENUNASEMANAYNODEJODEPARECERLEMALLAFACILIDADCONQUELAHABAHECHOPEDAZOSYPORASEGURARSEDESTEPELIGROLATORNOAHACERDENUEVOPONIENDOLEUNASBARRASDEHIERROPORDEDENTRODETALMANERAQUEELQUEDOSATISFECHODESUFORTALEZAYSINQUERERHACERNUEVAEXPERIENCIADELLALADIPUTOYTUVOPORCELADAFINSIMADEENCAJEFUELUEGOAVERSUROCNYAUNQUETENAMASCUARTOSQUEUNREALYMASTACHASQUEELCABALLODEGONELAQUETANTUMPELLISETOSSAFUITLEPARECIOQUENIELBUCEFALODEALEJANDRONIBABIECAELDELCIDCONELSEIGUALABANCUATRODASSELEPASARONENIMAGINARQUENOMBRELEPONDRAPORQUESEGUNSEDECAELASMESMONOERARAZONQUECABALLODECABALLEROTANFAMOSOYTANBUENOELPORSESTUVIESESINNOMBRECONOCIDOYANSPROCURABAACOMODARSELEDEMANERAQUEDECLARASEQUIENHABASIDOANTESQUEFUESEDECABALLEROANDANTEYLOQUEERAENTONCESPUESESTABAMUYPUESTOENRAZONQUEMUDANDOSUSENORESTADOMUDASEELTAMBIENELNOMBREYLECOBRASEFAMOSOYDEESTRUENDOCOMOCONVENAALANUEVAORDENYALNUEVOEJERCICIOQUEYAPROFESABAYASDESPUESDEMUCHOSNOMBRESQUEFORMOBORROYQUITOANADIODESHIZOYTORNOAHACERENSUMEMORIAEIMAGINACIONALFINLEVINOALLAMARROCINANTENOMBREASUPARECERALTOSONOROYSIGNIFICATIVODELOQUEHABASIDOCUANDOFUEROCNANTESDELOQUEAHORAERAQUEERAANTESYPRIMERODETODOSLOSROCINESDELMUNDO"

        expected_subs_alphabet = "KAUIHEWLPCMOZXFBGRNJYSQDTV"

        ciphertext = uoc_mono_subs_cipher(plaintext, expected_subs_alphabet)
        subs_alphabet = uoc_find_alphabet(ciphertext)
        new_plaintext = uoc_mono_subs_decipher(ciphertext, subs_alphabet)
        ok = 0
        for i in range(len(plaintext)):
            if plaintext[i] == new_plaintext[i]:
                ok += 1
        score = round(100*float(ok)/len(plaintext),2)
        print("\nplaintext:", new_plaintext[:64], "...")
        print("Ex 2.2 score:", score)
        self.assertGreater(score, 70)



class Test_3(unittest.TestCase):

    def test_1(self):
        plaintext="ENUNLUGARDELAMANCHADECUYONOMBRENOQUIEROACORDARMENOHAMUCHOTIEMPOQUEVIVAUNHIDALGODELOSDELANZAENASTILLEROADARGAANTIGUAROCNFLACOYGALGOCORREDORUNAOLLADEALGOMASVACAQUECARNEROSALPICONLASMASNOCHESDUELOSYQUEBRANTOSLOSSABADOSLANTEJASLOSVIERNESALGUNPALOMINODEANADIDURALOSDOMINGOSCONSUMANLASTRESPARTESDESUHACIENDAELRESTODELLACONCLUANSAYODEVELARTECALZASDEVELLUDOPARALASFIESTASCONSUSPANTUFLOSDELOMESMOYLOSDASDEENTRESEMANASEHONRABACONSUVELLORDELOMASFINOTENAENSUCASAUNAAMAQUEPASABADELOSCUARENTAYUNASOBRINAQUENOLLEGABAALOSVEINTEYUNMOZODECAMPOYPLAZAQUEASENSILLABAELROCNCOMOTOMABALAPODADERAFRISABALAEDADDENUESTROHIDALGOCONLOSCINCUENTAANOSERADECOMPLEXIONRECIASECODECARNESENJUTODEROSTROGRANMADRUGADORYAMIGODELACAZAQUIERENDECIRQUETENAELSOBRENOMBREDEQUIJADAOQUESADAQUEENESTOHAYALGUNADIFERENCIAENLOSAUTORESQUEDESTECASOESCRIBENAUNQUEPORCONJETURASVEROSMILESSEDEJAENTENDERQUESELLAMABAQUIJANAPEROESTOIMPORTAPOCOANUESTROCUENTOBASTAQUEENLANARRACIONDELNOSESALGAUNPUNTODELAVERDADESPUESDESABERQUEESTESOBREDICHOHIDALGOLOSRATOSQUEESTABAOCIOSOQUEERANLOSMASDELANOSEDABAALEERLIBROSDECABALLERASCONTANTAAFICIONYGUSTOQUEOLVIDOCASIDETODOPUNTOELEJERCICIODELACAZAYAUNLAADMINISTRACIONDESUHACIENDAYLLEGOATANTOSUCURIOSIDADYDESATINOENESTOQUEVENDIOMUCHASHANEGASDETIERRADESEMBRADURAPARACOMPRARLIBROSDECABALLERASENQUELEERYASLLEVOASUCASATODOSCUANTOSPUDOHABERDELLOSYDETODOSNINGUNOSLEPARECANTANBIENCOMOLOSQUECOMPUSOELFAMOSOFELICIANODESILVAPORQUELACLARIDADDESUPROSAYAQUELLASENTRICADASRAZONESSUYASLEPARECANDEPERLASYMASCUANDOLLEGABAALEERAQUELLOSREQUIEBROSYCARTASDEDESAFOSDONDEENMUCHASPARTESHALLABAESCRITOLARAZONDELASINRAZONQUEAMIRAZONSEHACEDETALMANERAMIRAZONENFLAQUECEQUECONRAZONMEQUEJODELAVUESTRAFERMOSURAYTAMBIENCUANDOLEALOSALTOSCIELOSQUEDEVUESTRADIVINIDADDIVINAMENTECONLASESTRELLASOSFORTIFICANYOSHACENMERECEDORADELMERECIMIENTOQUEMERECELAVUESTRAGRANDEZACONESTASRAZONESPERDAELPOBRECABALLEROELJUICIOYDESVELABASEPORENTENDERLASYDESENTRANARLESELSENTIDOQUENOSELOSACARANILASENTENDIERAELMESMOARISTOTELESSIRESUCITARAPARASOLOELLONOESTABAMUYBIENCONLASHERIDASQUEDONBELIANSDABAYRECEBAPORQUESEIMAGINABAQUEPORGRANDESMAESTROSQUELEHUBIESENCURADONODEJARADETENERELROSTROYTODOELCUERPOLLENODECICATRICESYSENALESPEROCONTODOALABABAENSUAUTORAQUELACABARSULIBROCONLAPROMESADEAQUELLAINACABABLEAVENTURAYMUCHASVECESLEVINODESEODETOMARLAPLUMAYDALLEFINALPIEDELALETRACOMOALLSEPROMETEYSINDUDAALGUNALOHICIERAYAUNSALIERACONELLOSIOTROSMAYORESYCONTINUOSPENSAMIENTOSNOSELOESTORBARANTUVOMUCHASVECESCOMPETENCIACONELCURADESULUGARQUEERAHOMBREDOCTOGRADUADOENSIGENZASOBRECUALHABASIDOMEJORCABALLEROPALMERNDEINGALATERRAOAMADSDEGAULAMASMAESENICOLASBARBERODELMISMOPUEBLODECAQUENINGUNOLLEGABAALCABALLERODELFEBOYQUESIALGUNOSELEPODACOMPARARERADONGALAORHERMANODEAMADSDEGAULAPORQUETENAMUYACOMODADACONDICIONPARATODOQUENOERACABALLEROMELINDROSONITANLLORONCOMOSUHERMANOYQUEENLODELAVALENTANOLEIBAENZAGAENRESOLUCIONELSEENFRASCOTANTOENSULECTURAQUESELEPASABANLASNOCHESLEYENDODECLAROENCLAROYLOSDASDETURBIOENTURBIOYASDELPOCODORMIRYDELMUCHOLEERSELESECOELCELEBRODEMANERAQUEVINOAPERDERELJUICIOLLENOSELELAFANTASADETODOAQUELLOQUELEAENLOSLIBROSASDEENCANTAMENTOSCOMODEPENDENCIASBATALLASDESAFOSHERIDASREQUIEBROSAMORESTORMENTASYDISPARATESIMPOSIBLESYASENTOSELEDETALMODOENLAIMAGINACIONQUEERAVERDADTODAAQUELLAMAQUINADEAQUELLASSONADASINVENCIONESQUELEAQUEPARAELNOHABAOTRAHISTORIAMASCIERTAENELMUNDODECAELQUEELCIDRUYDAZHABASIDOMUYBUENCABALLEROPEROQUENOTENAQUEVERCONELCABALLERODELAARDIENTEESPADAQUEDESOLOUNREVESHABAPARTIDOPORMEDIODOSFIEROSYDESCOMUNALESGIGANTESMEJORESTABACONBERNARDODELCARPIOPORQUEENRONCESVALLESHABAMUERTOAROLDANELENCANTADOVALIENDOSEDELAINDUSTRIADEHERCULESCUANDOAHOGOAANTEOELHIJODELATIERRAENTRELOSBRAZOSDECAMUCHOBIENDELGIGANTEMORGANTEPORQUECONSERDEAQUELLAGENERACIONGIGANTEAQUETODOSSONSOBERBIOSYDESCOMEDIDOSELSOLOERAAFABLEYBIENCRIADOPEROSOBRETODOSESTABABIENCONREINALDOSDEMONTALBANYMASCUANDOLEVEASALIRDESUCASTILLOYROBARCUANTOSTOPABAYCUANDOENALLENDEROBOAQUELDOLODEMAHOMAQUEERATODODEOROSEGUNDICESUHISTORIADIERAELPORDARUNAMANODECOCESALTRAIDORDEGALALONALAMAQUETENAYAUNASUSOBRINADEANADIDURAENEFETOREMATADOYASUJUICIOVINOADARENELMASEXTRANOPENSAMIENTOQUEJAMASDIOLOCOENELMUNDOYFUEQUELEPARECIOCONVENIBLEYNECESARIOASPARAELAUMENTODESUHONRACOMOPARAELSERVICIODESUREPUBLICAHACERSECABALLEROANDANTEYIRSEPORTODOELMUNDOCONSUSARMASYCABALLOABUSCARLASAVENTURASYAEJERCITARSEENTODOAQUELLOQUEELHABALEDOQUELOSCABALLEROSANDANTESSEEJERCITABANDESHACIENDOTODOGENERODEAGRAVIOYPONIENDOSEENOCASIONESYPELIGROSDONDEACABANDOLOSCOBRASEETERNONOMBREYFAMAIMAGINABASEELPOBREYACORONADOPORELVALORDESUBRAZOPORLOMENOSDELIMPERIODETRAPISONDAYASCONESTOSTANAGRADABLESPENSAMIENTOSLLEVADODELEXTRANOGUSTOQUEENELLOSSENTASEDIOPRIESAAPONERENEFETOLOQUEDESEABAYLOPRIMEROQUEHIZOFUELIMPIARUNASARMASQUEHABANSIDODESUSBISABUELOSQUETOMADASDEORNYLLENASDEMOHOLUENGOSSIGLOSHABAQUEESTABANPUESTASYOLVIDADASENUNRINCONLIMPIOLASYADEREZOLASLOMEJORQUEPUDOPEROVIOQUETENANUNAGRANFALTAYERAQUENOTENANCELADADEENCAJESINOMORRIONSIMPLEMASAESTOSUPLIOSUINDUSTRIAPORQUEDECARTONESHIZOUNMODODEMEDIACELADAQUEENCAJADACONELMORRIONHACANUNAAPARIENCIADECELADAENTERAESVERDADQUEPARAPROBARSIERAFUERTEYPODAESTARALRIESGODEUNACUCHILLADASACOSUESPADAYLEDIODOSGOLPESYCONELPRIMEROYENUNPUNTODESHIZOLOQUEHABAHECHOENUNASEMANAYNODEJODEPARECERLEMALLAFACILIDADCONQUELAHABAHECHOPEDAZOSYPORASEGURARSEDESTEPELIGROLATORNOAHACERDENUEVOPONIENDOLEUNASBARRASDEHIERROPORDEDENTRODETALMANERAQUEELQUEDOSATISFECHODESUFORTALEZAYSINQUERERHACERNUEVAEXPERIENCIADELLALADIPUTOYTUVOPORCELADAFINSIMADEENCAJE"

        ciphertext = uoc_custom_cipher(plaintext)
        new_plaintext = uoc_custom_decipher(ciphertext)

        mx = max(ciphertext, key=ciphertext.count)
        score = len(ciphertext)//ciphertext.count(mx)
        print("\nEx 3.2 score: ", score) 

        self.assertGreater(score, 25)

    def test_2(self):
        plaintext = "ENUNLUGARDELAMANCHADECUYONOMBRENOQUIEROACORDARMENOHAMUCHOTIEMPOQUEVIVAUNHIDALGODELOSDELANZAENASTILLEROADARGAANTIGUAROCNFLACOYGALGOCORREDORUNAOLLADEALGOMASVACAQUECARNEROSALPICONLASMASNOCHESDUELOSYQUEBRANTOSLOSSABADOSLANTEJASLOSVIERNESALGUNPALOMINODEANADIDURALOSDOMINGOSCONSUMANLASTRESPARTESDESUHACIENDAELRESTODELLACONCLUANSAYODEVELARTECALZASDEVELLUDOPARALASFIESTASCONSUSPANTUFLOSDELOMESMOYLOSDASDEENTRESEMANASEHONRABACONSUVELLORDELOMASFINOTENAENSUCASAUNAAMAQUEPASABADELOSCUARENTAYUNASOBRINAQUENOLLEGABAALOSVEINTEYUNMOZODECAMPOYPLAZAQUEASENSILLABAELROCNCOMOTOMABALAPODADERAFRISABALAEDADDENUESTROHIDALGOCONLOSCINCUENTAANOSERADECOMPLEXIONRECIASECODECARNESENJUTODEROSTROGRANMADRUGADORYAMIGODELACAZAQUIERENDECIRQUETENAELSOBRENOMBREDEQUIJADAOQUESADAQUEENESTOHAYALGUNADIFERENCIAENLOSAUTORESQUEDESTECASOESCRIBENAUNQUEPORCONJETURASVEROSMILESSEDEJAENTENDERQUESELLAMABAQUIJANAPEROESTOIMPORTAPOCOANUESTROCUENTOBASTAQUEENLANARRACIONDELNOSESALGAUNPUNTODELAVERDADESPUESDESABERQUEESTESOBREDICHOHIDALGOLOSRATOSQUEESTABAOCIOSOQUEERANLOSMASDELANOSEDABAALEERLIBROSDECABALLERASCONTANTAAFICIONYGUSTOQUEOLVIDOCASIDETODOPUNTOELEJERCICIODELACAZAYAUNLAADMINISTRACIONDESUHACIENDAYLLEGOATANTOSUCURIOSIDADYDESATINOENESTOQUEVENDIOMUCHASHANEGASDETIERRADESEMBRADURAPARACOMPRARLIBROSDECABALLERASENQUELEERYASLLEVOASUCASATODOSCUANTOSPUDOHABERDELLOSYDETODOSNINGUNOSLEPARECANTANBIENCOMOLOSQUECOMPUSOELFAMOSOFELICIANODESILVAPORQUELACLARIDADDESUPROSAYAQUELLASENTRICADASRAZONESSUYASLEPARECANDEPERLASYMASCUANDOLLEGABAALEERAQUELLOSREQUIEBROSYCARTASDEDESAFOSDONDEENMUCHASPARTESHALLABAESCRITOLARAZONDELASINRAZONQUEAMIRAZONSEHACEDETALMANERAMIRAZONENFLAQUECEQUECONRAZONMEQUEJODELAVUESTRAFERMOSURAYTAMBIENCUANDOLEALOSALTOSCIELOSQUEDEVUESTRADIVINIDADDIVINAMENTECONLASESTRELLASOSFORTIFICANYOSHACENMERECEDORADELMERECIMIENTOQUEMERECELAVUESTRAGRANDEZACONESTASRAZONESPERDAELPOBRECABALLEROELJUICIOYDESVELABASEPORENTENDERLASYDESENTRANARLESELSENTIDOQUENOSELOSACARANILASENTENDIERAELMESMOARISTOTELESSIRESUCITARAPARASOLOELLONOESTABAMUYBIENCONLASHERIDASQUEDONBELIANSDABAYRECEBAPORQUESEIMAGINABAQUEPORGRANDESMAESTROSQUELEHUBIESENCURADONODEJARADETENERELROSTROYTODOELCUERPOLLENODECICATRICESYSENALESPEROCONTODOALABABAENSUAUTORAQUELACABARSULIBROCONLAPROMESADEAQUELLAINACABABLEAVENTURAYMUCHASVECESLEVINODESEODETOMARLAPLUMAYDALLEFINALPIEDELALETRACOMOALLSEPROMETEYSINDUDAALGUNALOHICIERAYAUNSALIERACONELLOSIOTROSMAYORESYCONTINUOSPENSAMIENTOSNOSELOESTORBARANTUVOMUCHASVECESCOMPETENCIACONELCURADESULUGARQUEERAHOMBREDOCTOGRADUADOENSIGENZASOBRECUALHABASIDOMEJORCABALLEROPALMERNDEINGALATERRAOAMADSDEGAULAMASMAESENICOLASBARBERODELMISMOPUEBLODECAQUENINGUNOLLEGABAALCABALLERODELFEBOYQUESIALGUNOSELEPODACOMPARARERADONGALAORHERMANODEAMADSDEGAULAPORQUETENAMUYACOMODADACONDICIONPARATODOQUENOERACABALLEROMELINDROSONITANLLORONCOMOSUHERMANOYQUEENLODELAVALENTANOLEIBAENZAGAENRESOLUCIONELSEENFRASCOTANTOENSULECTURAQUESELEPASABANLASNOCHESLEYENDODECLAROENCLAROYLOSDASDETURBIOENTURBIOYASDELPOCODORMIRYDELMUCHOLEERSELESECOELCELEBRODEMANERAQUEVINOAPERDERELJUICIOLLENOSELELAFANTASADETODOAQUELLOQUELEAENLOSLIBROSASDEENCANTAMENTOSCOMODEPENDENCIASBATALLASDESAFOSHERIDASREQUIEBROSAMORESTORMENTASYDISPARATESIMPOSIBLESYASENTOSELEDETALMODOENLAIMAGINACIONQUEERAVERDADTODAAQUELLAMAQUINADEAQUELLASSONADASINVENCIONESQUELEAQUEPARAELNOHABAOTRAHISTORIAMASCIERTAENELMUNDODECAELQUEELCIDRUYDAZHABASIDOMUYBUENCABALLEROPEROQUENOTENAQUEVERCONELCABALLERODELAARDIENTEESPADAQUEDESOLOUNREVESHABAPARTIDOPORMEDIODOSFIEROSYDESCOMUNALESGIGANTESMEJORESTABACONBERNARDODELCARPIOPORQUEENRONCESVALLESHABAMUERTOAROLDANELENCANTADOVALIENDOSEDELAINDUSTRIADEHERCULESCUANDOAHOGOAANTEOELHIJODELATIERRAENTRELOSBRAZOSDECAMUCHOBIENDELGIGANTEMORGANTEPORQUECONSERDEAQUELLAGENERACIONGIGANTEAQUETODOSSONSOBERBIOSYDESCOMEDIDOSELSOLOERAAFABLEYBIENCRIADOPEROSOBRETODOSESTABABIENCONREINALDOSDEMONTALBANYMASCUANDOLEVEASALIRDESUCASTILLOYROBARCUANTOSTOPABAYCUANDOENALLENDEROBOAQUELDOLODEMAHOMAQUEERATODODEOROSEGUNDICESUHISTORIADIERAELPORDARUNAMANODECOCESALTRAIDORDEGALALONALAMAQUETENAYAUNASUSOBRINADEANADIDURAENEFETOREMATADOYASUJUICIOVINOADARENELMASEXTRANOPENSAMIENTOQUEJAMASDIOLOCOENELMUNDOYFUEQUELEPARECIOCONVENIBLEYNECESARIOASPARAELAUMENTODESUHONRACOMOPARAELSERVICIODESUREPUBLICAHACERSECABALLEROANDANTEYIRSEPORTODOELMUNDOCONSUSARMASYCABALLOABUSCARLASAVENTURASYAEJERCITARSEENTODOAQUELLOQUEELHABALEDOQUELOSCABALLEROSANDANTESSEEJERCITABANDESHACIENDOTODOGENERODEAGRAVIOYPONIENDOSEENOCASIONESYPELIGROSDONDEACABANDOLOSCOBRASEETERNONOMBREYFAMAIMAGINABASEELPOBREYACORONADOPORELVALORDESUBRAZOPORLOMENOSDELIMPERIODETRAPISONDAYASCONESTOSTANAGRADABLESPENSAMIENTOSLLEVADODELEXTRANOGUSTOQUEENELLOSSENTASEDIOPRIESAAPONERENEFETOLOQUEDESEABAYLOPRIMEROQUEHIZOFUELIMPIARUNASARMASQUEHABANSIDODESUSBISABUELOSQUETOMADASDEORNYLLENASDEMOHOLUENGOSSIGLOSHABAQUEESTABANPUESTASYOLVIDADASENUNRINCONLIMPIOLASYADEREZOLASLOMEJORQUEPUDOPEROVIOQUETENANUNAGRANFALTAYERAQUENOTENANCELADADEENCAJESINOMORRIONSIMPLEMASAESTOSUPLIOSUINDUSTRIAPORQUEDECARTONESHIZOUNMODODEMEDIACELADAQUEENCAJADACONELMORRIONHACANUNAAPARIENCIADECELADAENTERAESVERDADQUEPARAPROBARSIERAFUERTEYPODAESTARALRIESGODEUNACUCHILLADASACOSUESPADAYLEDIODOSGOLPESYCONELPRIMEROYENUNPUNTODESHIZOLOQUEHABAHECHOENUNASEMANAYNODEJODEPARECERLEMALLAFACILIDADCONQUELAHABAHECHOPEDAZOSYPORASEGURARSEDESTEPELIGROLATORNOAHACERDENUEVOPONIENDOLEUNASBARRASDEHIERROPORDEDENTRODETALMANERAQUEELQUEDOSATISFECHODESUFORTALEZAYSINQUERERHACERNUEVAEXPERIENCIADELLALADIPUTOYTUVOPORCELADAFINSIMADEENCAJE"

        ciphertext = uoc_custom_cipher(plaintext)
        new_plaintext = uoc_custom_decipher(ciphertext)

        self.assertEqual(plaintext, new_plaintext)




if __name__ == '__main__':

    # create a suite with all tests
    test_classes_to_run = [Test_1_12, Test_1_34, Test_2_1, Test_2_2, Test_3]
    loader = unittest.TestLoader()
    suites_list = []
    for test_class in test_classes_to_run:
        suite = loader.loadTestsFromTestCase(test_class)
        suites_list.append(suite)

    all_tests_suite = unittest.TestSuite(suites_list)

    # run the test suite with high verbosity
    runner = unittest.TextTestRunner(verbosity=2)
    results = runner.run(all_tests_suite)



